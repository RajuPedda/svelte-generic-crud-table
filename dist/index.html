<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset='utf-8'>
    <meta name='viewport' content='width=device-width,initial-scale=1'>
    <title>Generic Crud Table</title>
    <link rel='icon' type='image/png' href='favicon.png'>
    <link rel='stylesheet' href='build/bundle.css'>
    <script defer src='build/bundle.js'></script>
</head>

<body>
<crud-table></crud-table>
</body>

<script>
    let table = [
        {name: 'myName', job: 'code', private: 'not editable'},
        {name: 'myName2', job: 'code2', private: 'not editable'}];
    let options = ['CREATE', 'EDIT', 'DELETE', 'DETAILS'];
    let name = 'Awesome';
    let show_fields = [{name: '200px'},{job: '200px'}];
    let editable_fields = ['name', 'job'];
    let genericCrudTable = document.querySelector('crud-table');
    genericCrudTable.setAttribute('name', name);
    genericCrudTable.setAttribute('show_fields', JSON.stringify(show_fields));
    genericCrudTable.setAttribute('editable_fields', JSON.stringify(editable_fields));
    genericCrudTable.setAttribute('options', JSON.stringify(options));
    genericCrudTable.setAttribute('table', JSON.stringify(table));
    genericCrudTable.addEventListener('create', () => {
        console.log('create');
        table.push({name: 'myName', job: 'code', private: 'not editable'});
        genericCrudTable.setAttribute('table', JSON.stringify(table));
    });
    genericCrudTable.addEventListener('details', (e) => {
        console.log('details');
        console.log(e.detail.body);
    });
</script>
</html>
